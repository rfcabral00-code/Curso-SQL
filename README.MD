üìä Curso de SQL

Este reposit√≥rio cont√©m os materiais, exemplos pr√°ticos e exerc√≠cios desenvolvidos ao longo do curso de SQL, partindo dos conceitos b√°sicos at√© t√≥picos avan√ßados, com foco em an√°lise e manipula√ß√£o de dados em bancos relacionais.

üóìÔ∏è Dia 1 ‚Äì Fundamentos de SQL

No primeiro dia de curso, foram apresentados os conceitos iniciais e a base necess√°ria para escrita de consultas SQL.

üìå Conte√∫dos abordados

Introdu√ß√£o ao SQL e bancos de dados relacionais

Prepara√ß√£o do ambiente de desenvolvimento:

Configura√ß√£o do VS Code

Estrutura b√°sica de um script SQL

Primeiro comando: ‚ÄúOl√°, mundo‚Äù em SQL

Comandos fundamentais:

SELECT

FROM

WHERE

Introdu√ß√£o √†s cl√°usulas SQL

Cria√ß√£o de novas colunas (colunas calculadas)

Exerc√≠cios de fixa√ß√£o para pr√°tica dos conceitos iniciais

üóìÔ∏è Dia 2 ‚Äì Ordena√ß√£o, Condicionais e Agrega√ß√µes

No segundo dia, o foco foi organizar resultados, criar l√≥gicas condicionais e realizar contagens, habilidades essenciais para an√°lise de dados.

üîπ ORDER BY

O comando ORDER BY √© utilizado para ordenar os resultados de uma consulta.

Exemplo ‚Äì Ordena√ß√£o com filtro e m√∫ltiplos crit√©rios
SELECT *
FROM clientes
WHERE flTwitch = 1
ORDER BY DtCriacao ASC, QtdePontos DESC;


L√≥gica aplicada:

Filtra clientes com flTwitch = 1

Ordena pela data de cria√ß√£o (crescente)

Em seguida, pela quantidade de pontos (decrescente)

üîπ CASE WHEN

O CASE WHEN permite criar regras condicionais dentro das consultas SQL.

üìå Observa√ß√µes importantes:

Cada CASE cria uma nova coluna

Muito utilizado para classifica√ß√£o, segmenta√ß√£o e cria√ß√£o de flags

Classifica√ß√£o de clientes por faixa de pontos
SELECT idCliente,
       QtdePontos,
       CASE
            WHEN QtdePontos <= 500 THEN 'Ponei'
            WHEN QtdePontos <= 1000 THEN 'Ponei Premium'
            WHEN QtdePontos <= 5000 THEN 'Mago Aprendiz'
            WHEN QtdePontos <= 10000 THEN 'Mago Mestre'
            ELSE 'Mago Supremo'
       END AS NomeGrupo,

       CASE
            WHEN QtdePontos <= 1000 THEN 1
            ELSE 0
       END AS flPonei,

       CASE
            WHEN QtdePontos > 1000 THEN 1
            ELSE 0
       END AS flMago
FROM clientes
WHERE flMago = 1
ORDER BY QtdePontos DESC;

üß† Exerc√≠cio ‚Äì CASE WHEN

Classifica√ß√£o das transa√ß√µes por n√≠vel de pontos:

SELECT *,
       CASE
            WHEN QtdePontos < 10 THEN 'baixo'
            WHEN QtdePontos < 500 THEN 'm√©dio'
            ELSE 'alto'
       END AS Nivel
FROM transacoes;

üîπ COUNT

O COUNT √© uma fun√ß√£o de agrega√ß√£o utilizada para contar registros em uma tabela ou resultado de consulta.

Exemplo visto em aula
SELECT 
    COUNT(*),
    COUNT(1),
    COUNT(idCliente)
FROM clientes;

Diferen√ßa entre os tipos de COUNT

COUNT(*)

Conta todas as linhas

Inclui registros com valores NULL

Forma mais comum e recomendada

COUNT(1)

Tamb√©m conta todas as linhas

Equivalente ao COUNT(*) em bancos modernos

COUNT(idCliente)

Conta apenas registros onde idCliente n√£o √© NULL

√ötil quando a coluna pode conter valores nulos

üìå Se idCliente for chave prim√°ria, todos os COUNT retornam o mesmo valor.

üóìÔ∏è Dia 3 ‚Äì Agrega√ß√µes, DISTINCT e COUNT DISTINCT

Nesta aula foram apresentados conceitos fundamentais para resumir, deduplicar e analisar dados, utilizando fun√ß√µes de agrega√ß√£o e o operador DISTINCT.

üîπ DISTINCT e COUNT DISTINCT

O DISTINCT √© utilizado para eliminar duplicidades, considerando a combina√ß√£o das colunas selecionadas.

Contagem de registros distintos em um per√≠odo
SELECT 
    COUNT(*) AS totalRegistros,
    COUNT(DISTINCT IdTransacao) AS transacoesDistintas,
    COUNT(DISTINCT idCliente) AS clientesDistintos
FROM transacoes
WHERE DtCriacao >= '2025-07-01'
  AND DtCriacao <  '2025-08-01';


O que est√° sendo analisado:

Total de registros no per√≠odo

Total de transa√ß√µes √∫nicas

Total de clientes √∫nicos

üìå Observa√ß√£o importante:
DISTINCT atua sobre a coluna informada ou sobre a combina√ß√£o de colunas da query, eliminando duplicidades com base nisso.

DISTINCT aplicado diretamente na contagem de clientes
SELECT 
    COUNT(DISTINCT idCliente) AS clientesDistintos
FROM clientes;


üëâ Retorna o n√∫mero de clientes √∫nicos existentes na tabela.

üîπ Agrega√ß√µes com SUM e CASE WHEN

As fun√ß√µes de agrega√ß√£o permitem ‚Äúespremer‚Äù uma tabela, resumindo grandes volumes de dados em m√©tricas relevantes.

Exemplo ‚Äì An√°lise de pontos no per√≠odo
SELECT
    SUM(qtdePontos) AS qtdePontosTotal,

    SUM(CASE
            WHEN qtdePontos > 0 THEN qtdePontos
        END) AS qtdePontosPositivos,

    SUM(CASE
            WHEN qtdePontos < 0 THEN qtdePontos
        END) AS qtdePontosNegativos,

    COUNT(CASE
              WHEN qtdePontos < 0 THEN 1
          END) AS qtdeTransacoesNegativas
FROM transacoes
WHERE DtCriacao >= '2025-07-01'
  AND DtCriacao <  '2025-08-01';


O que foi feito:

Soma total de pontos

Soma apenas de pontos positivos

Soma apenas de pontos negativos

Contagem de transa√ß√µes negativas

üìå Uso combinado de CASE WHEN + agrega√ß√µes, padr√£o muito comum em an√°lises reais.

üîπ AVG, MIN, MAX e ROUND

Al√©m de somar e contar, tamb√©m foram utilizadas fun√ß√µes para an√°lise estat√≠stica b√°sica.

SELECT
    ROUND(AVG(qtdePontos), 2) AS mediaCarteira,
    ROUND(1.0 * SUM(qtdePontos) / COUNT(idCliente), 2) AS mediaCarteiraRoots,
    MIN(qtdePontos) AS minCarteira,
    MAX(qtdePontos) AS maxCarteira,
    SUM(flTwitch) AS totalTwitch,
    SUM(flEmail) AS totalEmail
FROM clientes;

Pontos importantes da aula

ROUND(valor, 2) ‚Üí define quantidade de casas decimais

Multiplicar por 1.0 for√ßa o c√°lculo para float, evitando divis√£o inteira

MIN e MAX retornam extremos do conjunto

SUM(flTwitch) funciona como contagem quando a coluna √© 0/1

üß† Conex√£o com pr√≥ximos temas

Aula 4 - Group By e Having

Esses conceitos s√£o a base direta para:

M√©tricas por cliente, produto ou per√≠odo

Dashboards e relat√≥rios anal√≠ticos

Projetos de dados reais

Conte√∫do das pr√≥ximas aulas:

GROUP BY ‚Üí HAVING ‚Üí JOIN ‚Üí CTE ‚Üí WINDOW FUNCTIONS