# Curso de SQL ‚Äî README Geral (At√© DDL/DML + Projeto)

## üìå Vis√£o Geral

Este reposit√≥rio documenta minha evolu√ß√£o pr√°tica no curso de SQL, cobrindo desde fundamentos de consulta (DQL) at√© manipula√ß√£o e defini√ß√£o de dados (DDL e DML), com foco em **an√°lise de dados**, **boas pr√°ticas**, **clareza de l√≥gica** e **aplica√ß√£o real de neg√≥cio**.

O objetivo n√£o √© apenas aprender comandos SQL isolados, mas **pensar em SQL como ferramenta de an√°lise**, constru√ß√£o de m√©tricas e prepara√ß√£o de dados para BI, Analytics e Data Science.

---

## üß± Fundamentos de SQL (DQL)

### SELECT e filtros

* Sele√ß√£o de colunas espec√≠ficas
* Uso de `WHERE` com filtros por data, valores e condi√ß√µes
* Compara√ß√µes temporais utilizando strings e fun√ß√µes de data

```sql
SELECT *
FROM transacoes
WHERE DtCriacao >= '2025-07-01'
AND DtCriacao < '2025-08-01';
```

---

## üî¢ Fun√ß√µes de Agrega√ß√£o

### COUNT

* `count(*)`: conta todas as linhas
* `count(1)`: equivalente ao count(*)
* `count(coluna)`: ignora valores nulos

```sql
SELECT
    count(*),
    count(DISTINCT IdTransacao),
    count(DISTINCT idCliente)
FROM transacoes;
```

### SUM, AVG, MIN, MAX

* Uso de agrega√ß√µes para an√°lise de volume, saldo e extremos
* Uso de `CASE WHEN` para segmentar m√©tricas

```sql
SELECT
    sum(qtdePontos) AS totalPontos,
    sum(CASE WHEN qtdePontos > 0 THEN qtdePontos END) AS pontosPositivos,
    sum(CASE WHEN qtdePontos < 0 THEN qtdePontos END) AS pontosNegativos
FROM transacoes;
```

---

## üß© DISTINCT

* Remove duplicidades com base na combina√ß√£o de colunas do SELECT
* Muito usado para contagem de entidades √∫nicas (clientes, transa√ß√µes)

```sql
SELECT count(DISTINCT idCliente)
FROM clientes;
```

---

## üìä GROUP BY e HAVING

### GROUP BY

* Agrega dados por entidade (cliente, produto, data)

```sql
SELECT
    idCliente,
    sum(qtdePontos) AS totalPontos,
    count(IdTransacao) AS qtdeTransacoes
FROM transacoes
GROUP BY idCliente;
```

### HAVING

* Filtra resultados ap√≥s agrega√ß√£o

```sql
HAVING sum(qtdePontos) >= 4000;
```

---

## üîó JOINs

* Uso de `LEFT JOIN` para enriquecer tabelas fato com dimens√µes

```sql
SELECT
    t1.*, 
    t2.DescCategoriaProduto
FROM transacao_produto t1
LEFT JOIN produtos t2
ON t1.IdProduto = t2.IdProduto;
```

---

## üîÑ Subqueries

* Utilizadas para filtros dependentes de outras consultas

```sql
SELECT *
FROM transacao_produto
WHERE IdProduto IN (
    SELECT IdProduto
    FROM produtos
    WHERE DescNomeProduto = 'Resgatar Ponei'
);
```

---

## üß† CTE ‚Äî Common Table Expressions

* Melhoram legibilidade, reutiliza√ß√£o e organiza√ß√£o do SQL
* Muito √∫teis para an√°lises em m√∫ltiplas etapas

```sql
WITH clientes_dia1 AS (
    SELECT DISTINCT idCliente
    FROM transacoes
    WHERE date(DtCriacao) = '2025-08-25'
),
clientes_dia5 AS (
    SELECT DISTINCT idCliente
    FROM transacoes
    WHERE date(DtCriacao) = '2025-08-29'
)
SELECT count(*)
FROM clientes_dia1 c1
JOIN clientes_dia5 c5
ON c1.idCliente = c5.idCliente;
```

---

## üìà Window Functions

* Permitem c√°lculos anal√≠ticos sem colapsar linhas
* Exemplo cl√°ssico: acumulados ao longo do tempo

```sql
sum(qtdeTransacao) OVER (ORDER BY dtDia) AS qtTransacaoAcumulada
```

---

## üèóÔ∏è DDL ‚Äî Data Definition Language

### CREATE TABLE

* Cria√ß√£o expl√≠cita de tabelas
* Defini√ß√£o de tipos e chaves

```sql
CREATE TABLE relatorio_diario (
    dtDia DATE PRIMARY KEY,
    qtdeTransacao INTEGER,
    qtTransacaoAcum INTEGER
);
```

---

## ‚úèÔ∏è DML ‚Äî Data Manipulation Language

### INSERT

* Inser√ß√£o de dados transformados via CTE

### DELETE

* Limpeza total ou baseada em regra de neg√≥cio

```sql
DELETE FROM relatorio_diario
WHERE date(dtDia) >= '2025-01-01';
```

### UPDATE

* Atualiza√ß√µes condicionais
* Aten√ß√£o √† compara√ß√£o correta de datas

```sql
UPDATE relatorio_diario
SET qtdeTransacao = 1000
WHERE date(dtDia) >= '2025-08-25';
```

---

## üìÅ Tabelas Derivadas

### Exemplo: clientes_d28

Tabela criada para an√°lise de atividade recente dos clientes (√∫ltimos 28 dias)

```sql
CREATE TABLE clientes_d28 (
    idCliente VARCHAR(250) PRIMARY KEY,
    qtdeTransacao INTEGER
);
```

---

## üöÄ Projeto Final ‚Äî Perfil Comportamental de Usu√°rios

### üéØ Objetivo

Construir uma tabela anal√≠tica com **features comportamentais dos usu√°rios**, permitindo an√°lises de engajamento, perfil e uso da plataforma.

### üß© Features previstas

* Quantidade de transa√ß√µes:

  * Vida
  * D7, D14, D28, D56

* Dias desde a √∫ltima transa√ß√£o

* Tempo de perman√™ncia na base

* Produto mais utilizado (Vida e janelas temporais)

* Saldo atual de pontos

* Pontos positivos acumulados

* Pontos negativos acumulados

* Dia da semana mais ativo (D28)

* Per√≠odo do dia mais ativo (D28)

* Compara√ß√£o de engajamento D28 vs Vida


## üìå Conclus√£o

At√© este ponto do curso, o foco deixou de ser apenas aprender comandos SQL e passou a ser:

> **estruturar dados, gerar m√©tricas e resolver problemas reais de neg√≥cio com SQL**.

Este reposit√≥rio servir√° como base para evolu√ß√£o cont√≠nua em Analytics, BI e projetos de dados.
